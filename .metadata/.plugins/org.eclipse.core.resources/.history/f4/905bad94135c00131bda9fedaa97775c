package zadam.ijfHF.defaultpackage;

import java.util.Calendar;
import java.util.Scanner;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;

public class Main {

	public static void main(String[] args) {

		System.out.println("Program has started...\n");
		
		EntityManagerFactory emf = Persistence.createEntityManagerFactory("Hello");
		EntityManager em = emf.createEntityManager();
		
        try {
            em.getTransaction().begin();
             
            /**************
             *  Create/update User into the database
             */
            
            /*User user = new User();
            User user = em.find(User.class, 2);
            user.setName("ZAdam");
            user.setPassword("1234");
             
            em.persist(user);*/
            
            /**************
             *  Create project into the database
             */
            
/*            Project project = new Project();
            project.setName("Integralt fejlesztes JAVA platformon HF");
            project.setDescription("Hazi feladat elkeszitese");
            
            em.persist(project);*/
            
            /**************
             *  Create task into the database
             */
            
/*            Task task = new Task();
            task.setName("JPA-val kapcsolatos feladatok elkeszitese");
            task.setDescription("Minden olyan resz, ami JPA-val kapcsolatos");
            task.setProject(em.find(Project.class, 1));
            
            em.persist(task);*/
            
            MeasureEntry me = new MeasureEntry();
            me.setCreationDate(Calendar.getInstance().getTime().toString());
            me.setComment("JPA dokumentacio olvasas");
            me.setDuration(2.5);
            me.setTask(em.find(Task.class, 1));
            me.setUser(em.find(User.class, 1));
            
            em.persist(task);
             
            em.getTransaction().commit();
        }
        catch (Exception e) {
            em.getTransaction().rollback();
            e.printStackTrace();
        }
        finally{
            emf.close();
        }
         
		Scanner s = new Scanner(System.in);
		try {
			System.out.println(s.next());
		} finally {
			s.close();
		}
        
        System.out.println("It is over");
	}
}
